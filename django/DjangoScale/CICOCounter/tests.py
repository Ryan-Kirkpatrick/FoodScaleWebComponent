from django.test import TestCase

from CICOCounter.models import *

import matplotlib.pyplot as plot
import numpy as np

# Create your tests here.

FOOD_1 = Food()
FOOD_1.barcode = "845785"
FOOD_1.name = "Vegemite"
FOOD_1.kilojoulesPerGram = 798/100
FOOD_1.gramsOfProteinPerGram = 25.4/100
FOOD_1.gramsOfFatPerGram = 0
FOOD_1.gramsOfSaturatedFatPerGram = 0
FOOD_1.gramsOfCarbohydratePerGram = 19.9/100
FOOD_1.gramsOfSugarPerGram = 2.2/100
FOOD_1.gramsOfSodiumPerGram = 3.450/100

FOOD_2 = Food()
FOOD_2.barcode = "578543"
FOOD_2.name = "Tortilla Chips"
FOOD_2.kilojoulesPerGram = 2070/100
FOOD_2.gramsOfProteinPerGram = 7.6/100
FOOD_2.gramsOfFatPerGram = 7.6/100
FOOD_2.gramsOfSaturatedFatPerGram = 2.3/100
FOOD_2.gramsOfCarbohydratePerGram = 56.5/100
FOOD_2.gramsOfSugarPerGram = 2.1/100
FOOD_2.gramsOfSodiumPerGram = 0.720/100

FOOD_3 = Food()
FOOD_3.barcode = "142834"
FOOD_3.name = "Kraft Dinner"
FOOD_3.kilojoulesPerGram = 1520/100
FOOD_3.gramsOfProteinPerGram = 12.2/100
FOOD_3.gramsOfFatPerGram = 3.1/100
FOOD_3.gramsOfSaturatedFatPerGram = 1.8/100
FOOD_3.gramsOfCarbohydratePerGram = 69.1/100
FOOD_3.gramsOfSugarPerGram = 8.3/100
FOOD_3.gramsOfSodiumPerGram = 0.410/100

FOOD_4 = Food()
FOOD_4.barcode = "157834"
FOOD_4.name = "Beef Mince"
FOOD_4.kilojoulesPerGram = 549/100
FOOD_4.gramsOfProteinPerGram = 20.4/100
FOOD_4.gramsOfFatPerGram = 5/100
FOOD_4.gramsOfSaturatedFatPerGram = 2.2/100
FOOD_4.gramsOfCarbohydratePerGram = 1/100
FOOD_4.gramsOfSugarPerGram = 1/100
FOOD_4.gramsOfSodiumPerGram = 0.060/100

FOOD_5 = Food()
FOOD_5.barcode = "926303"
FOOD_5.name = "Tasty Cheese"
FOOD_5.kilojoulesPerGram = 1650/100
FOOD_5.gramsOfProteinPerGram = 25.5/100
FOOD_5.gramsOfFatPerGram = 32.7/100
FOOD_5.gramsOfSaturatedFatPerGram = 21.8/100
FOOD_5.gramsOfCarbohydratePerGram = 0.5/100
FOOD_5.gramsOfSugarPerGram = 0.5/100
FOOD_5.gramsOfSodiumPerGram = 0.652/100

FOOD_LIST = [FOOD_1, FOOD_2, FOOD_3, FOOD_4, FOOD_5, ]

CONSUMPTION_1 = Consumption()
CONSUMPTION_1.time = 1688914466
CONSUMPTION_1.foodId = FOOD_LIST[0]
CONSUMPTION_1.weightGrams = 187

CONSUMPTION_2 = Consumption()
CONSUMPTION_2.time = 1688912689
CONSUMPTION_2.foodId = FOOD_LIST[0]
CONSUMPTION_2.weightGrams = 116

CONSUMPTION_3 = Consumption()
CONSUMPTION_3.time = 1688932169.0
CONSUMPTION_3.foodId = FOOD_LIST[0]
CONSUMPTION_3.weightGrams = 379

CONSUMPTION_4 = Consumption()
CONSUMPTION_4.time = 1688953589.0
CONSUMPTION_4.foodId = FOOD_LIST[2]
CONSUMPTION_4.weightGrams = 378

CONSUMPTION_5 = Consumption()
CONSUMPTION_5.time = 1688954307.0
CONSUMPTION_5.foodId = FOOD_LIST[0]
CONSUMPTION_5.weightGrams = 209

CONSUMPTION_6 = Consumption()
CONSUMPTION_6.time = 1689001527
CONSUMPTION_6.foodId = FOOD_LIST[3]
CONSUMPTION_6.weightGrams = 197

CONSUMPTION_7 = Consumption()
CONSUMPTION_7.time = 1688999645
CONSUMPTION_7.foodId = FOOD_LIST[0]
CONSUMPTION_7.weightGrams = 435

CONSUMPTION_8 = Consumption()
CONSUMPTION_8.time = 1689015390.0
CONSUMPTION_8.foodId = FOOD_LIST[2]
CONSUMPTION_8.weightGrams = 174

CONSUMPTION_9 = Consumption()
CONSUMPTION_9.time = 1689016148.0
CONSUMPTION_9.foodId = FOOD_LIST[0]
CONSUMPTION_9.weightGrams = 209

CONSUMPTION_10 = Consumption()
CONSUMPTION_10.time = 1689044136.0
CONSUMPTION_10.foodId = FOOD_LIST[0]
CONSUMPTION_10.weightGrams = 260

CONSUMPTION_11 = Consumption()
CONSUMPTION_11.time = 1689087751
CONSUMPTION_11.foodId = FOOD_LIST[0]
CONSUMPTION_11.weightGrams = 496

CONSUMPTION_12 = Consumption()
CONSUMPTION_12.time = 1689105795.0
CONSUMPTION_12.foodId = FOOD_LIST[1]
CONSUMPTION_12.weightGrams = 226

CONSUMPTION_13 = Consumption()
CONSUMPTION_13.time = 1689105838.0
CONSUMPTION_13.foodId = FOOD_LIST[1]
CONSUMPTION_13.weightGrams = 336

CONSUMPTION_14 = Consumption()
CONSUMPTION_14.time = 1689126315.0
CONSUMPTION_14.foodId = FOOD_LIST[2]
CONSUMPTION_14.weightGrams = 299

CONSUMPTION_15 = Consumption()
CONSUMPTION_15.time = 1689171434
CONSUMPTION_15.foodId = FOOD_LIST[0]
CONSUMPTION_15.weightGrams = 158

CONSUMPTION_16 = Consumption()
CONSUMPTION_16.time = 1689175005
CONSUMPTION_16.foodId = FOOD_LIST[2]
CONSUMPTION_16.weightGrams = 226

CONSUMPTION_17 = Consumption()
CONSUMPTION_17.time = 1689192672.0
CONSUMPTION_17.foodId = FOOD_LIST[1]
CONSUMPTION_17.weightGrams = 422

CONSUMPTION_18 = Consumption()
CONSUMPTION_18.time = 1689213877.0
CONSUMPTION_18.foodId = FOOD_LIST[3]
CONSUMPTION_18.weightGrams = 159

CONSUMPTION_19 = Consumption()
CONSUMPTION_19.time = 1689214067.0
CONSUMPTION_19.foodId = FOOD_LIST[3]
CONSUMPTION_19.weightGrams = 267

CONSUMPTION_20 = Consumption()
CONSUMPTION_20.time = 1689260433
CONSUMPTION_20.foodId = FOOD_LIST[3]
CONSUMPTION_20.weightGrams = 282

CONSUMPTION_21 = Consumption()
CONSUMPTION_21.time = 1689263594
CONSUMPTION_21.foodId = FOOD_LIST[3]
CONSUMPTION_21.weightGrams = 476

CONSUMPTION_22 = Consumption()
CONSUMPTION_22.time = 1689275055.0
CONSUMPTION_22.foodId = FOOD_LIST[1]
CONSUMPTION_22.weightGrams = 109

CONSUMPTION_23 = Consumption()
CONSUMPTION_23.time = 1689278805.0
CONSUMPTION_23.foodId = FOOD_LIST[2]
CONSUMPTION_23.weightGrams = 216

CONSUMPTION_24 = Consumption()
CONSUMPTION_24.time = 1689301631.0
CONSUMPTION_24.foodId = FOOD_LIST[1]
CONSUMPTION_24.weightGrams = 213

CONSUMPTION_25 = Consumption()
CONSUMPTION_25.time = 1689303644.0
CONSUMPTION_25.foodId = FOOD_LIST[0]
CONSUMPTION_25.weightGrams = 331

CONSUMPTION_26 = Consumption()
CONSUMPTION_26.time = 1689348800
CONSUMPTION_26.foodId = FOOD_LIST[3]
CONSUMPTION_26.weightGrams = 434

CONSUMPTION_27 = Consumption()
CONSUMPTION_27.time = 1689366818.0
CONSUMPTION_27.foodId = FOOD_LIST[2]
CONSUMPTION_27.weightGrams = 471

CONSUMPTION_28 = Consumption()
CONSUMPTION_28.time = 1689390469.0
CONSUMPTION_28.foodId = FOOD_LIST[1]
CONSUMPTION_28.weightGrams = 188

CONSUMPTION_29 = Consumption()
CONSUMPTION_29.time = 1689387978.0
CONSUMPTION_29.foodId = FOOD_LIST[3]
CONSUMPTION_29.weightGrams = 444

CONSUMPTION_30 = Consumption()
CONSUMPTION_30.time = 1689432835
CONSUMPTION_30.foodId = FOOD_LIST[3]
CONSUMPTION_30.weightGrams = 448

CONSUMPTION_31 = Consumption()
CONSUMPTION_31.time = 1689434806
CONSUMPTION_31.foodId = FOOD_LIST[1]
CONSUMPTION_31.weightGrams = 382

CONSUMPTION_32 = Consumption()
CONSUMPTION_32.time = 1689450155.0
CONSUMPTION_32.foodId = FOOD_LIST[2]
CONSUMPTION_32.weightGrams = 324

CONSUMPTION_33 = Consumption()
CONSUMPTION_33.time = 1689472303.0
CONSUMPTION_33.foodId = FOOD_LIST[1]
CONSUMPTION_33.weightGrams = 391

CONSUMPTION_34 = Consumption()
CONSUMPTION_34.time = 1689519670
CONSUMPTION_34.foodId = FOOD_LIST[1]
CONSUMPTION_34.weightGrams = 210

CONSUMPTION_35 = Consumption()
CONSUMPTION_35.time = 1689517558
CONSUMPTION_35.foodId = FOOD_LIST[1]
CONSUMPTION_35.weightGrams = 459

CONSUMPTION_36 = Consumption()
CONSUMPTION_36.time = 1689535497.0
CONSUMPTION_36.foodId = FOOD_LIST[3]
CONSUMPTION_36.weightGrams = 254

CONSUMPTION_37 = Consumption()
CONSUMPTION_37.time = 1689533418.0
CONSUMPTION_37.foodId = FOOD_LIST[3]
CONSUMPTION_37.weightGrams = 444

CONSUMPTION_38 = Consumption()
CONSUMPTION_38.time = 1689559925.0
CONSUMPTION_38.foodId = FOOD_LIST[0]
CONSUMPTION_38.weightGrams = 317

CONSUMPTION_39 = Consumption()
CONSUMPTION_39.time = 1689605984
CONSUMPTION_39.foodId = FOOD_LIST[2]
CONSUMPTION_39.weightGrams = 476

CONSUMPTION_40 = Consumption()
CONSUMPTION_40.time = 1689619687.0
CONSUMPTION_40.foodId = FOOD_LIST[3]
CONSUMPTION_40.weightGrams = 238

CONSUMPTION_41 = Consumption()
CONSUMPTION_41.time = 1689649209.0
CONSUMPTION_41.foodId = FOOD_LIST[1]
CONSUMPTION_41.weightGrams = 309

CONSUMPTION_42 = Consumption()
CONSUMPTION_42.time = 1689694292
CONSUMPTION_42.foodId = FOOD_LIST[1]
CONSUMPTION_42.weightGrams = 210

CONSUMPTION_43 = Consumption()
CONSUMPTION_43.time = 1689710494.0
CONSUMPTION_43.foodId = FOOD_LIST[1]
CONSUMPTION_43.weightGrams = 452

CONSUMPTION_44 = Consumption()
CONSUMPTION_44.time = 1689735342.0
CONSUMPTION_44.foodId = FOOD_LIST[0]
CONSUMPTION_44.weightGrams = 411

CONSUMPTION_45 = Consumption()
CONSUMPTION_45.time = 1689737283.0
CONSUMPTION_45.foodId = FOOD_LIST[0]
CONSUMPTION_45.weightGrams = 314

CONSUMPTION_46 = Consumption()
CONSUMPTION_46.time = 1689778143
CONSUMPTION_46.foodId = FOOD_LIST[0]
CONSUMPTION_46.weightGrams = 404

CONSUMPTION_47 = Consumption()
CONSUMPTION_47.time = 1689798430.0
CONSUMPTION_47.foodId = FOOD_LIST[3]
CONSUMPTION_47.weightGrams = 246

CONSUMPTION_48 = Consumption()
CONSUMPTION_48.time = 1689796965.0
CONSUMPTION_48.foodId = FOOD_LIST[1]
CONSUMPTION_48.weightGrams = 441

CONSUMPTION_49 = Consumption()
CONSUMPTION_49.time = 1689816881.0
CONSUMPTION_49.foodId = FOOD_LIST[1]
CONSUMPTION_49.weightGrams = 474

CONSUMPTION_50 = Consumption()
CONSUMPTION_50.time = 1689820704.0
CONSUMPTION_50.foodId = FOOD_LIST[3]
CONSUMPTION_50.weightGrams = 422

CONSUMPTION_51 = Consumption()
CONSUMPTION_51.time = 1689866599
CONSUMPTION_51.foodId = FOOD_LIST[1]
CONSUMPTION_51.weightGrams = 239

CONSUMPTION_52 = Consumption()
CONSUMPTION_52.time = 1689865709
CONSUMPTION_52.foodId = FOOD_LIST[1]
CONSUMPTION_52.weightGrams = 369

CONSUMPTION_53 = Consumption()
CONSUMPTION_53.time = 1689883081.0
CONSUMPTION_53.foodId = FOOD_LIST[1]
CONSUMPTION_53.weightGrams = 160

CONSUMPTION_54 = Consumption()
CONSUMPTION_54.time = 1689905154.0
CONSUMPTION_54.foodId = FOOD_LIST[1]
CONSUMPTION_54.weightGrams = 148

CONSUMPTION_55 = Consumption()
CONSUMPTION_55.time = 1689949180
CONSUMPTION_55.foodId = FOOD_LIST[2]
CONSUMPTION_55.weightGrams = 475

CONSUMPTION_56 = Consumption()
CONSUMPTION_56.time = 1689966201.0
CONSUMPTION_56.foodId = FOOD_LIST[2]
CONSUMPTION_56.weightGrams = 207

CONSUMPTION_57 = Consumption()
CONSUMPTION_57.time = 1689993620.0
CONSUMPTION_57.foodId = FOOD_LIST[1]
CONSUMPTION_57.weightGrams = 285

CONSUMPTION_58 = Consumption()
CONSUMPTION_58.time = 1689991465.0
CONSUMPTION_58.foodId = FOOD_LIST[1]
CONSUMPTION_58.weightGrams = 328

CONSUMPTION_59 = Consumption()
CONSUMPTION_59.time = 1690040531
CONSUMPTION_59.foodId = FOOD_LIST[3]
CONSUMPTION_59.weightGrams = 331

CONSUMPTION_60 = Consumption()
CONSUMPTION_60.time = 1690035719
CONSUMPTION_60.foodId = FOOD_LIST[1]
CONSUMPTION_60.weightGrams = 494

CONSUMPTION_61 = Consumption()
CONSUMPTION_61.time = 1690052445.0
CONSUMPTION_61.foodId = FOOD_LIST[1]
CONSUMPTION_61.weightGrams = 387

CONSUMPTION_62 = Consumption()
CONSUMPTION_62.time = 1690052219.0
CONSUMPTION_62.foodId = FOOD_LIST[0]
CONSUMPTION_62.weightGrams = 236

CONSUMPTION_63 = Consumption()
CONSUMPTION_63.time = 1690078945.0
CONSUMPTION_63.foodId = FOOD_LIST[3]
CONSUMPTION_63.weightGrams = 358

CONSUMPTION_64 = Consumption()
CONSUMPTION_64.time = 1690077270.0
CONSUMPTION_64.foodId = FOOD_LIST[2]
CONSUMPTION_64.weightGrams = 499

CONSUMPTION_LIST = [CONSUMPTION_1, CONSUMPTION_2, CONSUMPTION_3, CONSUMPTION_4, CONSUMPTION_5, CONSUMPTION_6, CONSUMPTION_7, CONSUMPTION_8, CONSUMPTION_9, CONSUMPTION_10, CONSUMPTION_11, CONSUMPTION_12, CONSUMPTION_13, CONSUMPTION_14, CONSUMPTION_15, CONSUMPTION_16, CONSUMPTION_17, CONSUMPTION_18, CONSUMPTION_19, CONSUMPTION_20, CONSUMPTION_21, CONSUMPTION_22, CONSUMPTION_23, CONSUMPTION_24, CONSUMPTION_25, CONSUMPTION_26, CONSUMPTION_27, CONSUMPTION_28, CONSUMPTION_29, CONSUMPTION_30, CONSUMPTION_31, CONSUMPTION_32, CONSUMPTION_33, CONSUMPTION_34, CONSUMPTION_35, CONSUMPTION_36, CONSUMPTION_37, CONSUMPTION_38, CONSUMPTION_39, CONSUMPTION_40, CONSUMPTION_41, CONSUMPTION_42, CONSUMPTION_43, CONSUMPTION_44, CONSUMPTION_45, CONSUMPTION_46, CONSUMPTION_47, CONSUMPTION_48, CONSUMPTION_49, CONSUMPTION_50, CONSUMPTION_51, CONSUMPTION_52, CONSUMPTION_53, CONSUMPTION_54, CONSUMPTION_55, CONSUMPTION_56, CONSUMPTION_57, CONSUMPTION_58, CONSUMPTION_59, CONSUMPTION_60, CONSUMPTION_61, CONSUMPTION_62, CONSUMPTION_63, CONSUMPTION_64, ]

def addAllToDB():
    for obj in FOOD_LIST + CONSUMPTION_LIST:
        obj.save()

class TestTestCase(TestCase):
    def setUp(self) -> None:
        addAllToDB()

    def test(self):
        consumptions = Consumption.objects.all()
        times = []
        kilojoules = []
        for consumption in consumptions:
            times.append(consumption.time)
            kilojoules.append(consumption.weightGrams * consumption.foodId.kilojoulesPerGram)

        figure, axis = plot.subplots()
        axis.stackplot(times, kilojoules)

        plot.savefig("out")